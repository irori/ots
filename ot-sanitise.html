<!DOCTYPE html>
<script src="sanitise.js"></script>
<input type="file" id="fileselect" />
<script>
document.getElementById('fileselect').addEventListener('change', (evt) => {
  var file = evt.target.files[0];
  var reader = new FileReader();
  reader.onload = (evt) => {
    var view = new Uint8Array(evt.target.result);
    sanitise(view);
  };
  reader.readAsArrayBuffer(file);
}, false);

function sanitise(data) {
  var context = new TestContext(10000);
  var output = new ExpandingMemoryStream(100 * 1024, 1024 * 1024);
  context.Process(output, data, data.length);
}
</script>
